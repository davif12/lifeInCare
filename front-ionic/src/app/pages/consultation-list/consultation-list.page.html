<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/cuidador/lista-idosos"></ion-back-button>
    </ion-buttons>
    <ion-title>Consultas - {{ elderlyName }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Estado vazio -->
  <div *ngIf="consultations.length === 0 && !loading" class="empty-state">
    <ion-icon name="calendar-outline" size="large"></ion-icon>
    <h2>Nenhuma consulta agendada</h2>
    <p>Este idoso ainda não possui consultas cadastradas.</p>
    <ion-button (click)="goToCreate()" expand="block">
      <ion-icon slot="start" name="add"></ion-icon>
      Agendar Primeira Consulta
    </ion-button>
  </div>

  <!-- Lista de consultas -->
  <ion-list *ngIf="consultations.length > 0">
    <ion-item-sliding *ngFor="let consultation of consultations">
      <ion-item lines="inset" button (click)="goToEdit(consultation.id!)">
        <ion-label>
          <h2>{{ consultation.specialty }}</h2>
          <h3>Dr(a). {{ consultation.doctorName }}</h3>
          <p>
            <ion-icon name="calendar-outline"></ion-icon>
            {{ consultation.scheduledDateTime | date:'dd/MM/yyyy HH:mm' }}
          </p>
          <p>
            <ion-icon name="location-outline"></ion-icon>
            {{ consultation.location }}
          </p>
          <p>
            <ion-badge [color]="getStatusColor(consultation.status || 'scheduled')">
              {{ getStatusText(consultation.status || 'scheduled') }}
            </ion-badge>
          </p>
        </ion-label>
        <ion-icon name="chevron-forward" slot="end"></ion-icon>
      </ion-item>

      <ion-item-options side="end">
        <ion-item-option color="primary" (click)="goToEdit(consultation.id!)">
          <ion-icon slot="icon-only" name="create"></ion-icon>
        </ion-item-option>
        <ion-item-option color="danger" (click)="confirmDelete(consultation.id!)">
          <ion-icon slot="icon-only" name="trash"></ion-icon>
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  <!-- Botão flutuante para adicionar -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed" *ngIf="consultations.length > 0">
    <ion-fab-button (click)="goToCreate()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
