{"version":3,"file":"2840.js","mappings":"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","sources":["./src/app/pages/acesso-idoso/acesso-idoso.routes.ts","./src/app/pages/acesso-idoso/acesso-idoso.page.ts","./src/app/pages/acesso-idoso/acesso-idoso.page.html"],"sourcesContent":["import { Routes } from '@angular/router';\r\nimport { AcessoIdosoPage } from './acesso-idoso.page';\r\n\r\nexport const routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AcessoIdosoPage\r\n  }\r\n];\r\n","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { \r\n  IonButton, \r\n  IonContent, \r\n  IonHeader, \r\n  IonTitle, \r\n  IonToolbar, \r\n  IonInput, \r\n  IonItem, \r\n  IonLabel,\r\n  IonBackButton,\r\n  IonButtons,\r\n  IonIcon,\r\n  IonSpinner\r\n} from '@ionic/angular/standalone';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { addIcons } from 'ionicons';\r\nimport { keyOutline, arrowBackOutline, alertCircleOutline } from 'ionicons/icons';\r\nimport { NgIf } from '@angular/common';\r\nimport { ElderlyService } from '../../services/elderly.service';\r\n\r\n@Component({\r\n  selector: 'app-acesso-idoso',\r\n  templateUrl: './acesso-idoso.page.html',\r\n  styleUrls: ['./acesso-idoso.page.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    IonHeader, \r\n    IonToolbar, \r\n    IonTitle, \r\n    IonContent, \r\n    IonButton, \r\n    IonInput, \r\n    IonItem, \r\n    IonLabel,\r\n    IonBackButton,\r\n    IonButtons,\r\n    IonIcon,\r\n    IonSpinner,\r\n    FormsModule,\r\n    NgIf\r\n  ]\r\n})\r\nexport class AcessoIdosoPage {\r\n  codigoAcesso: string = '';\r\n  isLoading = false;\r\n  errorMessage = '';\r\n  showError = false;\r\n\r\n  constructor(\r\n    private elderlyService: ElderlyService,\r\n    private router: Router\r\n  ) {\r\n    addIcons({\r\n      'key-outline': keyOutline,\r\n      'arrow-back-outline': arrowBackOutline,\r\n      'alert-circle-outline': alertCircleOutline\r\n    });\r\n    \r\n    // Limpar qualquer token anterior para forçar novo login\r\n    this.elderlyService.elderlyLogout();\r\n  }\r\n\r\n  acessar() {\r\n    if (!this.codigoAcesso || this.codigoAcesso.trim() === '') {\r\n      this.showError = true;\r\n      this.errorMessage = 'Por favor, digite o código de acesso';\r\n      return;\r\n    }\r\n    \r\n    this.isLoading = true;\r\n    this.showError = false;\r\n    \r\n    this.elderlyService.validatePin(this.codigoAcesso).subscribe({\r\n      next: (response) => {\r\n        console.log('Login bem-sucedido:', response);\r\n        this.isLoading = false;\r\n        \r\n        // Salvar o token do idoso (verificar diferentes formatos de resposta)\r\n        if (response && (response.access_token || response.accessToken)) {\r\n          const token = response.access_token || response.accessToken;\r\n          this.elderlyService.saveElderlyToken(token);\r\n          // Redirecionar para a página inicial do idoso\r\n          this.router.navigate(['/home-idoso']);\r\n        } else {\r\n          console.error('Resposta do servidor:', response);\r\n          this.showError = true;\r\n          this.errorMessage = 'Resposta inválida do servidor';\r\n        }\r\n      },\r\n      error: (error) => {\r\n        console.error('Erro ao validar PIN:', error);\r\n        this.isLoading = false;\r\n        this.showError = true;\r\n        this.errorMessage = error.error?.message || 'PIN inválido ou erro ao acessar';\r\n      }\r\n    });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/entrada\" icon=\"arrow-back-outline\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Acesso do Idoso</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <div class=\"acesso-container\">\r\n    <h1>Acesso Simplificado</h1>\r\n    <p>Digite o código de acesso fornecido pelo seu cuidador</p>\r\n    \r\n    <form (ngSubmit)=\"acessar()\" class=\"acesso-form\">\r\n      <ion-item class=\"codigo-input\">\r\n        <ion-icon name=\"key-outline\" slot=\"start\"></ion-icon>\r\n        <ion-label position=\"floating\">Código de Acesso</ion-label>\r\n        <ion-input type=\"text\" [(ngModel)]=\"codigoAcesso\" name=\"codigoAcesso\" required pattern=\"[0-9]*\" maxlength=\"6\"></ion-input>\r\n      </ion-item>\r\n      \r\n      <div *ngIf=\"showError\" class=\"error-message\">\r\n        <ion-icon name=\"alert-circle-outline\"></ion-icon>\r\n        <span>{{ errorMessage }}</span>\r\n      </div>\r\n      \r\n      <ion-button expand=\"block\" type=\"submit\" class=\"acesso-button\" [disabled]=\"isLoading\">\r\n        <ion-spinner name=\"crescent\" *ngIf=\"isLoading\"></ion-spinner>\r\n        <span *ngIf=\"!isLoading\">Acessar</span>\r\n      </ion-button>\r\n    </form>\r\n    \r\n    <div class=\"info-text\">\r\n      <p>Não tem um código? Fale com seu cuidador para receber um código de acesso.</p>\r\n    </div>\r\n  </div>\r\n</ion-content>\r\n"],"names":["AcessoIdosoPage","routes","path","component","IonButton","IonContent","IonHeader","IonTitle","IonToolbar","IonInput","IonItem","IonLabel","IonBackButton","IonButtons","IonIcon","IonSpinner","FormsModule","addIcons","keyOutline","arrowBackOutline","alertCircleOutline","NgIf","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","errorMessage","elderlyService","router","codigoAcesso","isLoading","showError","constructor","elderlyLogout","acessar","trim","validatePin","subscribe","next","response","console","log","access_token","accessToken","token","saveElderlyToken","navigate","error","message","ɵɵdirectiveInject","i1","ElderlyService","i2","Router","selectors","decls","vars","consts","template","AcessoIdosoPage_Template","rf","ctx","ɵɵlistener","AcessoIdosoPage_Template_form_ngSubmit_12_listener","ɵɵtwoWayListener","AcessoIdosoPage_Template_ion_input_ngModelChange_17_listener","$event","ɵɵtwoWayBindingSet","ɵɵtemplate","AcessoIdosoPage_div_18_Template","AcessoIdosoPage_ion_spinner_20_Template","AcessoIdosoPage_span_21_Template","ɵɵtwoWayProperty","ɵɵproperty","i3","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","PatternValidator","NgModel","NgForm","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}